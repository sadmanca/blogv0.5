<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Sadman Hossain">
<meta name="dcterms.date" content="2024-05-27">
<meta name="description" content="CLI tools for recording terminal sessions locally (and to the web) as asciicast files (.cast), GIFs, and animated SVGs">

<title>Software Showcase #1: Recording terminal sessions using asciinema and its derivatives</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/favicon.svg" rel="icon" type="image/svg+xml">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/quarto-contrib/line-highlight-1.0.0/line-highlight.css" rel="stylesheet">
<script src="../../site_libs/quarto-contrib/iconify-2.1.0/iconify-icon.min.js"></script>
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-Q095PB1G6R"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-Q095PB1G6R', { 'anonymize_ip': true});
</script>
<style>html{ scroll-behavior: smooth; }</style>
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: #f7f7f7;
      }

      .quarto-title-block .quarto-title-banner {
        color: #f7f7f7;
background: #565656;
      }
</style>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://raw.githack.com/mburakerman/prognroll/master/src/prognroll.min.js"></script>

<script>
$(function() {
  var defaultColor = "#6953ff";
  var banner = $(".quarto-title-banner");
  var bannerBgColor = banner.css("background-color");

  // Function to convert RGB to HEX
  function rgbToHex(rgb) {
    if (/^#[0-9A-F]{6}$/i.test(rgb)) {
      return rgb;
    }

    rgb = rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
    function hex(x) {
      return ("0" + parseInt(x).toString(16)).slice(-2);
    }
    return "#" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);
  }

  var progressBarColor = defaultColor;

  if (banner.length && rgbToHex(bannerBgColor) !== "#eeeeee") {
    progressBarColor = bannerBgColor;
  }

  $("body").prognroll({
    height: 4, // progress bar height
    color: progressBarColor, // progress bar background color
    custom: false // if you make it true, you can add your custom div and see its scroll progress on the page
  });
});
</script>


<script>

  document.addEventListener('DOMContentLoaded', function () {
    const giscusAttributes = {
      "src": "https://giscus.app/client.js",
      "data-repo": "sadmanca/blog",
      "data-repo-id": "MDEwOlJlcG9zaXRvcnk0MDI1OTEwNzY=",
      "data-category": "Comments",
      "data-category-id": "DIC_kwDOF_8NZM4CfKh0",
      "data-mapping": "pathname",
      "data-strict": "0",
      "data-reactions-enabled": "1",
      "data-emit-metadata": "0",
      "data-input-position": "top",
      "data-theme": "light",
      "data-lang": "en",
      "data-loading": "lazy",
      "crossorigin": "anonymous",
      "async": "",
    };

    // Dynamically create script tag
    const giscusScript = document.createElement("script");
    Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value));
    document.body.appendChild(giscusScript);
  });

</script>


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Software Showcase #1: Recording terminal sessions using asciinema and its derivatives">
<meta property="og:description" content="CLI tools for recording terminal sessions locally (and to the web) as asciicast files (.cast), GIFs, and animated SVGs">
<meta property="og:image" content="https://sadman.ca/posts/2024-05-27-software-showcase-01-asciinema/resources/asciinema.png">
<meta property="og:site_name" content="Sadman's Blog">
<meta property="og:image:alt" content="asciinema">
<meta property="og:image:height" content="852">
<meta property="og:image:width" content="1280">
<meta name="twitter:title" content="Software Showcase #1: Recording terminal sessions using asciinema and its derivatives">
<meta name="twitter:description" content="CLI tools for recording terminal sessions locally (and to the web) as asciicast files (.cast), GIFs, and animated SVGs">
<meta name="twitter:image" content="https://sadman.ca/posts/2024-05-27-software-showcase-01-asciinema/resources/asciinema.svg">
<meta name="twitter:creator" content="@sadmanca">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title"><iconify-icon inline="" icon="material-symbols:circle" aria-label="Icon circle from material-symbols Iconify.design set." title="Icon circle from material-symbols Iconify.design set."></iconify-icon>Sadman’s Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.xml"> 
<span class="menu-text"><i class="fa-solid fa-square-rss" aria-label="square-rss"></i> RSS</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text"><i class="fa-solid fa-circle-user" aria-label="circle-user"></i> About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/sadmanca/blog"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/sadmanca"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title"><strong>Software Showcase #1: Recording terminal sessions using <code>asciinema</code> and its derivatives</strong></h1>
                  <div>
        <div class="description">
          CLI tools for recording terminal sessions locally (and to the web) as <code>asciicast</code> files (<code>.cast</code>), GIFs, and animated SVGs
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Software Showcase</div>
                <div class="quarto-category">Tools</div>
                <div class="quarto-category">CLI</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p><a href="https://sadman.ca">Sadman Hossain</a> <a href="https://orcid.org/0000-0001-9691-420X" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 27, 2024</p>
      </div>
    </div>
    
      <div>
      <div class="quarto-title-meta-heading">Modified</div>
      <div class="quarto-title-meta-contents">
        <p class="date-modified">May 30, 2024</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#terminal-session-recorders" id="toc-terminal-session-recorders" class="nav-link active" data-scroll-target="#terminal-session-recorders">Terminal Session Recorders</a>
  <ul class="collapse">
  <li><a href="#what-are-terminal-session-recorders" id="toc-what-are-terminal-session-recorders" class="nav-link" data-scroll-target="#what-are-terminal-session-recorders">What <em>are</em> terminal session recorders?</a></li>
  <li><a href="#why-i-care-about-terminal-session-recorders" id="toc-why-i-care-about-terminal-session-recorders" class="nav-link" data-scroll-target="#why-i-care-about-terminal-session-recorders">Why <em>I</em> care about terminal session recorders</a></li>
  </ul></li>
  <li><a href="#asciinema" id="toc-asciinema" class="nav-link" data-scroll-target="#asciinema"><code>asciinema</code></a>
  <ul class="collapse">
  <li><a href="#installation" id="toc-installation" class="nav-link" data-scroll-target="#installation">Installation</a></li>
  <li><a href="#usage" id="toc-usage" class="nav-link" data-scroll-target="#usage">Usage</a>
  <ul class="collapse">
  <li><a href="#asciinema-rec-filename" id="toc-asciinema-rec-filename" class="nav-link" data-scroll-target="#asciinema-rec-filename"><code>&gt; asciinema rec [filename]</code></a></li>
  <li><a href="#asciinema-play-filenameurl" id="toc-asciinema-play-filenameurl" class="nav-link" data-scroll-target="#asciinema-play-filenameurl"><code>&gt; asciinema play &lt;filename/url&gt;</code></a></li>
  <li><a href="#asciinema-upload-filename" id="toc-asciinema-upload-filename" class="nav-link" data-scroll-target="#asciinema-upload-filename"><code>&gt; asciinema upload &lt;filename&gt;</code></a></li>
  </ul></li>
  <li><a href="#asciinema-on-the-web" id="toc-asciinema-on-the-web" class="nav-link" data-scroll-target="#asciinema-on-the-web"><code>asciinema</code> on the web</a></li>
  <li><a href="#where-asciinema-falls-flat" id="toc-where-asciinema-falls-flat" class="nav-link" data-scroll-target="#where-asciinema-falls-flat">Where <code>asciinema</code> falls flat</a>
  <ul class="collapse">
  <li><a href="#problem-1-windows" id="toc-problem-1-windows" class="nav-link" data-scroll-target="#problem-1-windows">Problem 1: <strong>Windows</strong></a></li>
  <li><a href="#problem-2-github" id="toc-problem-2-github" class="nav-link" data-scroll-target="#problem-2-github">Problem 2: <strong>GitHub</strong></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#agg" id="toc-agg" class="nav-link" data-scroll-target="#agg"><code>agg</code></a>
  <ul class="collapse">
  <li><a href="#usage-1" id="toc-usage-1" class="nav-link" data-scroll-target="#usage-1">Usage</a>
  <ul class="collapse">
  <li><a href="#agg-asciicast_filenameurl-output_gif_filename" id="toc-agg-asciicast_filenameurl-output_gif_filename" class="nav-link" data-scroll-target="#agg-asciicast_filenameurl-output_gif_filename"><code>&gt; agg &lt;asciicast_filename/url&gt; &lt;output_gif_filename&gt;</code></a></li>
  </ul></li>
  <li><a href="#where-agg-falls-flat" id="toc-where-agg-falls-flat" class="nav-link" data-scroll-target="#where-agg-falls-flat">Where <code>agg</code> falls flat</a></li>
  </ul></li>
  <li><a href="#svg-term-cli" id="toc-svg-term-cli" class="nav-link" data-scroll-target="#svg-term-cli"><code>svg-term-cli</code></a>
  <ul class="collapse">
  <li><a href="#why-use-animated-svgs-over-gifs" id="toc-why-use-animated-svgs-over-gifs" class="nav-link" data-scroll-target="#why-use-animated-svgs-over-gifs">Why use animated SVGs over GIFs</a></li>
  <li><a href="#usage-2" id="toc-usage-2" class="nav-link" data-scroll-target="#usage-2">Usage</a>
  <ul class="collapse">
  <li><a href="#svg-term" id="toc-svg-term" class="nav-link" data-scroll-target="#svg-term"><code>&gt; svg-term</code></a></li>
  </ul></li>
  <li><a href="#where-svg-term-cli-falls-flat" id="toc-where-svg-term-cli-falls-flat" class="nav-link" data-scroll-target="#where-svg-term-cli-falls-flat">Where <code>svg-term-cli</code> falls flat</a></li>
  </ul></li>
  <li><a href="#what-to-explore-next" id="toc-what-to-explore-next" class="nav-link" data-scroll-target="#what-to-explore-next">What to explore next</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/sadmanca/blog/edit/main/posts/2024-05-27-software-showcase-01-asciinema/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/sadmanca/blog/issues/new/choose" class="toc-action"><i class="bi empty"></i>Report an issue</a></li><li><a href="https://github.com/sadmanca/blog/blob/main/posts/2024-05-27-software-showcase-01-asciinema/index.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li></ul></div><div class="quarto-other-links"><h2>Other Links</h2><ul><li><a href="https://asciinema.org"><i class="bi bi-terminal-plus"></i>asciinema.org</a></li></ul></div><div class="quarto-code-links"><h2>Code Links</h2><ul><li><a href="https://github.com/asciinema/asciinema"><i class="bi bi-github"></i>asciinema</a></li><li><a href="https://github.com/Watfaq/PowerSession-rs"><i class="bi bi-github"></i>PowerSession-rs</a></li><li><a href="https://github.com/asciinema/agg"><i class="bi bi-github"></i>agg</a></li><li><a href="https://github.com/marionebl/svg-term-cli"><i class="bi bi-github"></i>svg-term-cli</a></li><li><a href="https://github.com/MrMarble/termsvg"><i class="bi bi-github"></i>term-svg</a></li></ul></div></nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">





<p><strong>I’m a bit of a software hoarder.</strong> I’m always coming across new tools, libraries, and frameworks for automating tasks or creating cool new things, and I always forget to take note of whatever I come across, so this post is the start of (hopefully) many in a series of me doing double-duty to show off all the interesting bits of software I come across<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> (from things as small as bash scripts to things as large as full-blown software toolkits like <code>ffmpeg</code>) and make a formal record of all of them for my own notekeeping (because I have starred so many repositories on GitHub and I can hardly remember<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> what a fraction of them are even about).</p>
<div class="no-row-height column-margin column-container"><div id="fn1"><p><sup>1</sup>&nbsp;Including how to set things up and use them, which is something that I have to learn from scratch every time I go to set up my software workflows on yet another device and so it’s something that I want to make note (and while I’m doing that, I might as well share it with everybody else)</p></div><div id="fn2"><p><sup>2</sup>&nbsp;What the average terminal session looks like for me when I’m trying to run some old tool I haven’t used for a while:</p>
<script id="asciicast-QmYHMiHpK8i7J0CZJoOxgUeDw" src="https://asciinema.org/a/QmYHMiHpK8i7J0CZJoOxgUeDw.js" data-speed="1.75" data-autoplay="true" data-loop="true" data-preload="false" data-cols="30" data-rows="10" async=""></script>
</div><div id="fn3"><p><sup>3</sup>&nbsp;I’m trying to take blogging seriously right now (for the record, I’ve tried at least twice before and failed to stick with it), and for me that means going all out in making my blog posts multimodal and interesting (which is why I care about these terminal recordings).</p></div></div><p>I usually come across these tools whenever I’m browsing GitHub to find some working piece of software or code to resolve some pain point of mine (or to automate tasks because I’m lazy), and seeing as that I’m trying to figure out how to include GIFs of code running in terminals on blog posts recently<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>, <strong>terminal session recorders are a good place to start.</strong></p>
<section id="terminal-session-recorders" class="level1 page-columns page-full">
<h1>Terminal Session Recorders</h1>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Summary
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use <a href="https://github.com/asciinema/asciinema"><strong><code>asciinema</code></strong></a> for recording terminal sessions to local <code>.cast</code> files, replaying <code>.cast</code> files in a terminals, &amp; for uploading <code>.cast</code> files to <a href="https://asciinema.org">asciinema.org</a> (or your own server).</p>
<ul>
<li>Recordings uploaded to <a href="https://asciinema.org">asciinema.org</a> can be embedded as dynamic <code>asciinema</code> recording iframes in HTML webpages (like those you see throughout this post!)</li>
<li>On Windows, use <a href="https://github.com/Watfaq/PowerSession-rs"><strong><code>PowerSession-rs</code></strong></a> (a drop-in replacement fork of <code>asciinema</code>)</li>
<li>Use <a href="https://github.com/asciinema/agg"><strong><code>agg</code></strong></a> to convert <code>asciinema</code> recordings (<code>.cast</code> or web URL) to <strong><em>GIFs</em></strong></li>
<li>Use <a href="https://github.com/marionebl/svg-term-cli"><strong><code>svg-term-cli</code></strong></a> to convert <code>asciinema</code> recordings (<code>.cast</code> or web URL) to <strong><em>animated SVGs</em></strong></li>
</ul>
</div>
</div>
<section id="what-are-terminal-session-recorders" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="what-are-terminal-session-recorders">What <em>are</em> terminal session recorders?</h2>
<p>Terminal session recorders, like <a href="https://github.com/asciinema/asciinema"><code>asciinema</code></a><a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>, are CLI tools that can record (and playback recordings of) standard input/output in terminal sessions. What makes them different from just using screen recording software is that terminal session recorders run <em>inside</em> a terminal<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> and store the actual raw text from terminal sessions as a stream of events using a custom file format<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>, which means that:</p>
<div class="no-row-height column-margin column-container"><div id="fn4"><p><sup>4</sup>&nbsp;Despite being constantly reminded my eyes that it’s spelled “as-ciinema”, I just can’t pronouncing it in my head as “ascii-cinema” 😅</p></div><div id="fn5"><p><sup>5</sup>&nbsp;Instead of as a window display capture service running as a GUI program.</p></div><div id="fn6"><p><sup>6</sup>&nbsp;<a href="https://docs.asciinema.org/manual/asciicast/v2/"><code>asciicast</code></a> for <code>asciinema</code></p></div></div><ol type="1">
<li>Recordings take up <em>much</em> less space compared to video files</li>
<li>You can actually copy the raw text being displayed when playing back recordings<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> in the terminal or on the web; and</li>
<li>You can actually customize how terminal sessions look during playback by editing the recorded files or just by changing your playback settings (which means you don’t have to re-record sessions for small modifications like changing font styles)</li>
</ol>
<!-- ::: {.column-page-inset-left} -->
<!-- ::: {.column-page}
::: {layout-nrow=2}



```{=html}
<script id="asciicast-117813" src="https://asciinema.org/a/117813.js" data-speed="0.5" data-autoplay="true" data-loop="true" data-preload="true" async></script>
```

```{=html}
<script id="asciicast-316444" src="https://asciinema.org/a/316444.js" data-speed="0.5" data-autoplay="true" data-loop="true" data-preload="true" async></script>
```

```{=html}
<script id="asciicast-9593" src="https://asciinema.org/a/9593.js" data-speed="0.5" data-autoplay="true" data-loop="true" data-preload="true" async></script>
```

```{=html}
<script id="asciicast-41361" src="https://asciinema.org/a/41361.js" data-speed="0.5" data-autoplay="true" data-loop="true" data-preload="true" async></script>
```



:::
::: -->
<div class="no-row-height column-margin column-container"><div id="fn7"><p><sup>7</sup>&nbsp;Which can be incredibly useful for, say, replicating the actions in a GIF you found for a project or tool online (especially if they have interactivity like <a href="https://github.com/vim/vim">Vim</a> or <a href="https://github.com/zyedidia/micro">Micro</a>)</p></div></div><div class="column-body-outset">
<div id="fig-sumfunc" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-sumfunc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<script id="asciicast-9593" src="https://asciinema.org/a/9593.js" data-speed="2.8" data-autoplay="true" data-loop="true" data-preload="false" async=""></script>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-sumfunc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: What an <code>asciinema</code> recording embedded on the web looks like. <strong>Shown:</strong> <em>“Iterative git rebase with vim”</em>. <strong>Source:</strong> <a href="https://asciinema.org/a/9593" class="uri">https://asciinema.org/a/9593</a>
</figcaption>
</figure>
</div>
</div>
</section>
<section id="why-i-care-about-terminal-session-recorders" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="why-i-care-about-terminal-session-recorders">Why <em>I</em> care about terminal session recorders</h2>
<p>That’s all very promising, but there’s two very specific reasons as to why <em>I’m</em> interested in terminal session recorders (and if you’re a software developer, you might be too):</p>
<ol type="1">
<li><p>I want to be able to show snippets of terminal sessions in blog posts on my website without slowing down pages by loading several videos<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></p></li>
<li><p>I want to be able to easily create GIFs/animated SVGs for READMEs for my projects on GitHub<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a></p></li>
</ol>
<div class="no-row-height column-margin column-container"><div id="fn8"><p><sup>8</sup>&nbsp;Of which virtually all are expected to range from tens of seconds to a minute or two in length</p></div><div id="fn9"><p><sup>9</sup>&nbsp;One project that I’d really like to spruce up is <a href="https://github.com/sadmanca/eagerDB">eagerDB</a>, which I currently just have a rather boring single image for in its README.</p></div></div><div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Why <code>asciinema</code> is not enough
</div>
</div>
<div class="callout-body-container callout-body">
<p>More on that second point above, converting recordings from <code>asciicast</code> to GIF/SVG is one area where <code>asciinema</code> is lacking (it only supports its proprietary file format), which is where middleware like <code>agg</code> and <code>svg-term-cli</code> come in (and I’ll be taking about both at length later on).</p>
</div>
</div>
<p>But before we dive into those <code>asciinema</code>-derivatives, let’s take a quick look at what exactly <code>asciinema</code> has to offer (as well as how we can use it to record and playback terminal sessions).</p>
<hr>
</section>
</section>
<section id="asciinema" class="level1 page-columns page-full">
<h1><code>asciinema</code></h1>
<section id="installation" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="installation">Installation</h2>
<p>You can install <a href="https://github.com/asciinema/asciinema"><code>asciinema</code></a> using PyPI via pip or using your package repository of choice<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a> on Linux, macOS, and FreeBSD<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn10"><p><sup>10</sup>&nbsp;You can find the full list at <a href="https://docs.asciinema.org/manual/cli/installation/">docs.asciinema.org/manual/cli/installation</a></p></div><div id="fn11"><p><sup>11</sup>&nbsp;As you might’ve noticed, Windows is not listed. There’s a good reason for that, and we’ll get to it when we talk about <a href=""><code>PowerSession-rs</code></a>.</p></div></div><div class="sourceCode" id="cb1" data-code-line-numbers=""><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> pip <span class="fu">install</span> asciinema</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="usage" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="usage">Usage</h2>
<p>Once you’ve got it installed, there are 3 main commands:</p>
<table class="table">
<thead>
<tr class="header">
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&gt; asciinema rec</code></td>
<td><strong>Record</strong> a terminal session to a local <code>asciicast</code> file</td>
</tr>
<tr class="even">
<td><code>&gt; asciinema play</code></td>
<td><strong>Play</strong> a recording (local file or web URL) in the current terminal</td>
</tr>
<tr class="odd">
<td><code>&gt; asciinema upload</code><a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a></td>
<td><strong>Upload</strong> a recording to <a href="https://asciinema.org/">asciinema.org</a> or a <a href="https://docs.asciinema.org/manual/server/self-hosting/">self-hosted asciinema server</a></td>
</tr>
</tbody>
</table>
<div class="no-row-height column-margin column-container"><div id="fn12"><p><sup>12</sup>&nbsp;There’s also <code>&gt; asciinema auth</code> for connecting <code>asciinema</code> on your local CLI to your <a href="https://asciinema.org/">asciinema.org</a> account so you can upload recordings to your account (you can also upload anonymously without having to use the <code>auth</code> command, but anonymous uploads that aren’t linked to an account within 7 days of their upload date are automatically deleted).</p></div></div><section id="asciinema-rec-filename" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="asciinema-rec-filename"><code>&gt; asciinema rec [filename]</code></h3>
<p>Start up a recording session using <code>&gt; asciinema rec [filename]</code><a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a> and <code>asciinema</code> will launch a new shell<a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a> in your terminal and start recording standard output. In addition, there are a load of different options<a href="#fn15" class="footnote-ref" id="fnref15" role="doc-noteref"><sup>15</sup></a> you can configure for recordings, some of the more useful of which include:</p>
<div class="no-row-height column-margin column-container"><div id="fn13"><p><sup>13</sup>&nbsp;You can also omit <code>[filename]</code> and just run <code>asciinema rec</code>; after ending the recording, you’ll receive a prompt in the terminal to save the recording locally, upload to <a href="https://asciinema.org/">asciinema.org</a>, or discard (which will also delete the temporary file used to store the recording).</p></div><div id="fn14"><p><sup>14</sup>&nbsp;<strong>Q: What’s the difference between a Terminal and a Shell?</strong> A: a shell is a command-line interpreter that processes commands, whereas a terminal is a program (or even a <a href="https://en.wikipedia.org/wiki/Computer_terminal">hardware device</a>) that provides a user interface for running a shell.</p></div><div id="fn15"><p><sup>15</sup>&nbsp;See the <a href="https://docs.asciinema.org/manual/cli/usage/#asciinema-rec-filename"><code>asciinema</code> docs</a> for more options.</p></div></div><table class="table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Argument</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>--stdin</code></td>
<td>Record standard input (standard output is recorded by default)</td>
</tr>
<tr class="even">
<td><code>--append</code></td>
<td>Append to an existing recording</td>
</tr>
<tr class="odd">
<td><code>-c, --command=&lt;command&gt;</code></td>
<td>Record output for a single command only<a href="#fn16" class="footnote-ref" id="fnref16" role="doc-noteref"><sup>16</sup></a> or specific shell (instead of the default using the <code>$SHELL</code> environment variable)</td>
</tr>
<tr class="even">
<td><code>-i, --idle-time-limit=&lt;sec&gt;</code></td>
<td>Limit recorded terminal inactivity to some max <code>&lt;sec&gt;</code> seconds</td>
</tr>
</tbody>
</table>
<div class="no-row-height column-margin column-container"><div id="fn16"><p><sup>16</sup>&nbsp;Instead of an interactive shell where you can type in any number of commands and the recording only stops once you enter <code>exit</code> or press <code>CTRL+d</code></p></div></div></section>
<section id="asciinema-play-filenameurl" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="asciinema-play-filenameurl"><code>&gt; asciinema play &lt;filename/url&gt;</code></h3>
<p>Replay a terminal session recorded using <code>asciinema rec</code> (at a local file or url) in the current terminal using <code>asciinema play</code>. You can pause/resume playback by pressing <code>space</code>, or end playback by pressing <code>CTRL+c</code>. Similar to <code>rec</code>, you also have some options for:</p>
<table class="table">
<thead>
<tr class="header">
<th>Argument</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>-i, --idle-time-limit=&lt;sec&gt;</code></td>
<td>Limit replayed terminal inactivity to some max <code>&lt;sec&gt;</code> seconds</td>
</tr>
<tr class="even">
<td><code>-s, --speed=&lt;factor&gt;</code></td>
<td>Set playback speed</td>
</tr>
<tr class="odd">
<td><code>-l, --loop</code></td>
<td>Loop playback</td>
</tr>
<tr class="even">
<td><code>-m, --pause-on-markers</code></td>
<td>Automatically pause playback on markers<a href="#fn17" class="footnote-ref" id="fnref17" role="doc-noteref"><sup>17</sup></a></td>
</tr>
</tbody>
</table>
<div class="no-row-height column-margin column-container"><div id="fn17"><p><sup>17</sup>&nbsp;Markers are like breakpoints or video chapters in YouTube that allow to mark specific timestamps in recordings for navigation; you can configure the <code>asciinema</code> recorder to have a <a href="https://docs.asciinema.org/manual/cli/configuration/">keyboard shortcut for adding markers during recording</a> or edit an existing recording and insert marker lines as specified in the <a href="https://docs.asciinema.org/manual/player/markers/">documentation for asciinema markers</a>. On the web, markers are shown in the video timeline (similar to video chapters in YouTube), and can make jumping to points of interest in a terminal session a lot easier.</p></div></div><hr>
</section>
<section id="asciinema-upload-filename" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="asciinema-upload-filename"><code>&gt; asciinema upload &lt;filename&gt;</code></h3>
<p>This command uploads a local recording to whatever URL is specified in the <code>ASCIINEMA_API_URL</code> environment variable (<a href="https://asciinema.org/">asciinema.org</a> by default<a href="#fn18" class="footnote-ref" id="fnref18" role="doc-noteref"><sup>18</sup></a>).</p>
<div class="no-row-height column-margin column-container"><div id="fn18"><p><sup>18</sup>&nbsp;Under whatever account has been authenticated via <code>&gt; asciinema auth</code> or anonymously if you haven’t run that yet.</p></div></div><div class="column-page-inset-left">
<div id="fig-record" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-record-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<script id="asciicast-e5jWLa6Ey0IIyHuSLAc4Saak8" src="https://asciinema.org/a/e5jWLa6Ey0IIyHuSLAc4Saak8" data-speed="3.8" data-autoplay="true" data-loop="true" data-preload="false" data-cols="80" data-rows="25" async=""></script>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-record-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Try jumping to different markers by clicking on the recording timeline.
</figcaption>
</figure>
</div>
</div>
</section>
</section>
<section id="asciinema-on-the-web" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="asciinema-on-the-web"><code>asciinema</code> on the web</h2>
<p>You can view your and others’ uploaded recordings on <a href="https://asciinema.org/">asciinema.org</a><a href="#fn19" class="footnote-ref" id="fnref19" role="doc-noteref"><sup>19</sup></a>. More importantly, you can embed uploaded recordings as iframes in HTML pages using some inline JavaScript as below:</p>
<div class="no-row-height column-margin column-container"><div id="fn19"><p><sup>19</sup>&nbsp;And there are some quite cool recordings on there, from a <a href="https://asciinema.org/a/117813">demo of a mapping CLI</a> to <a href="https://asciinema.org/a/9593">iterative git rebasing with <code>vim</code></a>.</p></div></div><div class="sourceCode" id="cb2" data-code-line-numbers=""><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"https://asciinema.org/a/646222.js"</span><span class="ot"> id</span><span class="op">=</span><span class="st">"asciicast-646222"</span><span class="ot"> async</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-one" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-one-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<script src="https://asciinema.org/a/646222.js" id="asciicast-646222" async=""></script>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-one-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: The resulting embedded <code>asciinema</code> recording.
</figcaption>
</figure>
</div>
<p>While the look and feel of the embedded player defaults to the original uploader’s settings, you can override settings yourself using the following modifications to the inline script:</p>
<div class="sourceCode" id="cb3" data-code-line-numbers=""><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  src<span class="op">=</span><span class="st">"https://asciinema.org/a/646222.js"</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  id<span class="op">=</span><span class="st">"..."</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  data<span class="op">-</span>start<span class="op">-</span>at<span class="op">=</span><span class="st">"00:40"</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  data<span class="op">-</span>autoplay<span class="op">=</span><span class="st">"true"</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  data<span class="op">-</span>loop<span class="op">=</span><span class="st">"true"</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  data<span class="op">-</span>speed<span class="op">=</span><span class="st">"2.75"</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  data<span class="op">-</span>idle<span class="op">-</span>time<span class="op">-</span>limit<span class="op">=</span><span class="st">"2"</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  data<span class="op">-</span>theme<span class="op">=</span><span class="st">"solarized-light"</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  data<span class="op">-</span>poster<span class="op">=</span><span class="st">"npt:1:23"</span>  <span class="op">&lt;!--</span> player preview frame timestamp <span class="op">--&gt;</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  data<span class="op">-</span>cols<span class="op">=</span><span class="st">"65"</span>          <span class="op">&lt;!--</span> terminal width <span class="op">--&gt;</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  data<span class="op">-</span>rows<span class="op">=</span><span class="st">"20"</span>          <span class="op">&lt;!--</span> terminal height <span class="op">--&gt;</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  data<span class="op">-</span>preload<span class="op">=</span><span class="st">"true"</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span><span class="op">&gt;</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-another" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-another-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<script src="https://asciinema.org/a/646222.js" id="asciicast-646222-two" data-start-at="00:40" data-autoplay="true" data-loop="true" data-speed="2.75" data-idle-time-limit="2" data-theme="solarized-dark" data-cols="50" data-rows="18" data-preload="true" async=""></script>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-another-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: The resulting embedded <code>asciinema</code> recording <em>with additional configuration &amp; zoomed in</em>.
</figcaption>
</figure>
</div>
</section>
<section id="where-asciinema-falls-flat" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="where-asciinema-falls-flat">Where <code>asciinema</code> falls flat</h2>
<section id="problem-1-windows" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="problem-1-windows">Problem 1: <strong>Windows</strong></h3>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
For Windows Users
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <code>asciinema</code> website and GitHub repository do an exceedingly poor job of telling you this from the get-go<a href="#fn20" class="footnote-ref" id="fnref20" role="doc-noteref"><sup>20</sup></a>, but <strong><em><code>asciinema</code> does not work on Windows!</em></strong></p>
</div>
</div>
<div class="no-row-height column-margin column-container"><div id="fn20"><p><sup>20</sup>&nbsp;I actually installed <code>asciinema</code> on my Windows-based laptop via <code>pip</code> with no issues, only to run into errors when trying to record via <code>asciinema rec</code>, and <em>then</em> when I googled the errors I came across the <a href="https://github.com/asciinema/asciinema/issues/47">GitHub issues</a> mentioning that the program isn’t even designed to run on Windows.</p></div><div id="fn21"><p><sup>21</sup>&nbsp;At the time of writing <code>PowerSession-rs</code> does not yet support (playing recordings from a URL)[https://github.com/Watfaq/PowerSession-rs/issues/22] or the <a href="https://github.com/Watfaq/PowerSession-rs/issues/42">idle time limit option</a> from <code>asciinema play</code>, among other features.</p></div><div id="fn22"><p><sup>22</sup>&nbsp;One slight however: it only supports PowerShell.</p></div></div><p><strong>Thankfully</strong>, a port of <code>asciinema</code> for Windows exists in the form of <a href="https://github.com/Watfaq/PowerSession-rs"><strong><code>PowerSession-rs</code></strong></a>, and it has the <em>most</em><a href="#fn21" class="footnote-ref" id="fnref21" role="doc-noteref"><sup>21</sup></a> of the same commands so it can be used as a drop-in replacement for <code>asciinema</code> on Windows (which is an absolute blessing<a href="#fn22" class="footnote-ref" id="fnref22" role="doc-noteref"><sup>22</sup></a> for people chained to Windows like myself).</p>
</section>
<section id="problem-2-github" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="problem-2-github">Problem 2: <strong>GitHub</strong></h3>
<p>GitHub READMEs don’t render <code>&lt;script&gt;</code> tags, which means that while you can technically include an image<a href="#fn23" class="footnote-ref" id="fnref23" role="doc-noteref"><sup>23</sup></a> that links to a recording on <a href="https://asciinema.org/">asciinema.org</a> like the below, it will only play the recording <em>after</em> navigating to an external page, which means you can’t get a cool README where there’s an autoplaying video of the code like at <a href="https://github.com/tqdm/tqdm">github.com/tqdm/tqdm</a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn23"><p><sup>23</sup>&nbsp;You can get an SVG of the default preview frame for the <code>asciinema</code> recording by appending <code>.svg</code> to the recording’s URL (e.g.&nbsp;<code>https://asciinema.org/a/bJMOlPe5F4mFLY0Rl6fiJSOp3.svg</code> for <code>https://asciinema.org/a/bJMOlPe5F4mFLY0Rl6fiJSOp3</code>)</p></div></div><p>GitHub does, however, allow for embedding GIFs and animated SVGs, which is where <code>agg</code> comes in.</p>
<hr>
</section>
</section>
</section>
<section id="agg" class="level1 page-columns page-full">
<h1><code>agg</code></h1>
<p><a href="https://github.com/asciinema/agg"><code>agg</code></a> is a CLI tool<a href="#fn24" class="footnote-ref" id="fnref24" role="doc-noteref"><sup>24</sup></a> for generating GIF files from <code>asciinema</code> recordings<a href="#fn25" class="footnote-ref" id="fnref25" role="doc-noteref"><sup>25</sup></a>, written by the same developer as <code>asciinema</code>. It’s built using Rust, so you will need to have Cargo installed to be able install it (Cargo is distributed by default with Rust).</p>
<div class="no-row-height column-margin column-container"><div id="fn24"><p><sup>24</sup>&nbsp;A successor to the now-deprecated <a href="https://github.com/asciinema/asciicast2gif"><code>asciicast2gif</code></a></p></div><div id="fn25"><p><sup>25</sup>&nbsp;Stored using the <a href="https://github.com/asciinema/asciinema/blob/main/doc/asciicast-v2.md"><code>asiicast-v2</code> file format</a>.</p></div></div><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/asciinema/agg/main/demo.gif" class="img-fluid figure-img"></p>
<figcaption>A GIF generated from an <code>asciinema</code> recording using <code>agg</code></figcaption>
</figure>
</div>
<section id="usage-1" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="usage-1">Usage</h2>
<section id="agg-asciicast_filenameurl-output_gif_filename" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="agg-asciicast_filenameurl-output_gif_filename"><code>&gt; agg &lt;asciicast_filename/url&gt; &lt;output_gif_filename&gt;</code></h3>
<p>You can use <code>agg</code> for rendering GIFs from a local asciicast <code>.cast</code> recording or from URL like the below:</p>
<div class="sourceCode" id="cb4" data-code-line-numbers=""><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> agg <span class="ex">input.cast</span> output.gif</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb5" data-code-line-numbers=""><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> agg <span class="ex">https://asciinema.org/a/569727</span> output.gif</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>There are also a large number of adidtional options available to customize the look of the generated GIF<a href="#fn26" class="footnote-ref" id="fnref26" role="doc-noteref"><sup>26</sup></a>, including setting:</p>
<div class="no-row-height column-margin column-container"><div id="fn26"><p><sup>26</sup>&nbsp;See the full list of options at <a href="https://github.com/asciinema/agg#usage">github.com/asciinema/agg#usage</a>.</p></div></div><table class="table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Argument</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>--font-family &lt;FONT_FAMILY&gt;</code></td>
<td>Specify font family [<em>default</em>: “<code>JetBrains Mono</code>, <code>Fira Code</code>, <code>SF Mono</code>, <code>Menlo</code>, <code>Consolas</code>, <code>DejaVu Sans Mono</code>, <code>Liberation Mono</code>”]</td>
</tr>
<tr class="even">
<td><code>--font-size &lt;FONT_SIZE&gt;</code></td>
<td>Specify font size (in pixels) [<em>default</em>: <code>14</code>]</td>
</tr>
<tr class="odd">
<td><code>--idle-time-limit &lt;IDLE_TIME_LIMIT&gt;</code></td>
<td>Limit idle time to max number of seconds [<em>default</em>: <code>5</code>]</td>
</tr>
<tr class="even">
<td><code>--line-height &lt;LINE_HEIGHT&gt;</code></td>
<td>Specify line height [<em>default</em>: <code>1.4</code>]</td>
</tr>
<tr class="odd">
<td><code>--speed &lt;SPEED&gt;</code></td>
<td>Adjust playback speed [<em>default</em>: <code>1</code>]</td>
</tr>
<tr class="even">
<td><code>--theme &lt;THEME&gt;</code></td>
<td>Select color theme [<em>possible values</em>: <code>asciinema</code>, <code>dracula</code>, <code>monokai</code>, <code>solarized-dark</code>, <code>solarized-light</code>, <code>custom</code>]</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="where-agg-falls-flat" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="where-agg-falls-flat">Where <code>agg</code> falls flat</h2>
<p>The trouble with <code>agg</code> however is that the GIF encoder<a href="#fn27" class="footnote-ref" id="fnref27" role="doc-noteref"><sup>27</sup></a> it uses generates <em>very</em> high quality files at the cost also <em>very</em> high file sizes (which is fine for a handful of GIFs on a GitHub README but can potentially be a strain on resources if displayed on, say, a webpage).</p>
<div class="no-row-height column-margin column-container"><div id="fn27"><p><sup>27</sup>&nbsp;<a href="https://github.com/ImageOptim/gifski">github.com/ImageOptim/gifski</a></p></div></div><p>To remedy that, we can use <a href="https://github.com/marionebl/svg-term-cli"><strong><code>svg-term-cli</code></strong></a>, which is designed for rendering asiicast recordings to animated SVGs.</p>
<hr>
</section>
</section>
<section id="svg-term-cli" class="level1 page-columns page-full">
<h1><code>svg-term-cli</code></h1>
<section id="why-use-animated-svgs-over-gifs" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="why-use-animated-svgs-over-gifs">Why use animated SVGs over GIFs</h2>
<p>For one, animated SVGs are able to look a <em>lot</em> more crisp at larger resolutions than GIFs by using vector images instead of pixel based animation. Adding on to that (and why you should be using animated SVGs instead of GIFs when embedding recordings on websites), this also allows animated SVGs to have a <em>much</em> smaller file size, which is a very nice combination of features, making <code>svg-term-cli</code> almost<a href="#fn28" class="footnote-ref" id="fnref28" role="doc-noteref"><sup>28</sup></a> the ideal tool for rendering your <code>asciinema</code> recordings<a href="#fn29" class="footnote-ref" id="fnref29" role="doc-noteref"><sup>29</sup></a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn28"><p><sup>28</sup>&nbsp;To find out why it’s <em>almost</em> ideal (instead of just being ideal), continue reading to the <strong>“Where <code>svg-term-cli</code> falls flat”</strong> section.</p></div><div id="fn29"><p><sup>29</sup>&nbsp;Notable exception: you can’t rewind or copy text from recordings, making this more of a cosmetic option.</p></div></div><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/svg-term-cli.svg" class="img-fluid figure-img"></p>
<figcaption>An animated SVG generated from an <code>asciinema</code> recording using <code>svg-term-cli</code>.</figcaption>
</figure>
</div>
</section>
<section id="usage-2" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="usage-2">Usage</h2>
<p>After installing <code>svg-term-cli</code> via <code>&gt; npm install -g svg-term-cli</code><a href="#fn30" class="footnote-ref" id="fnref30" role="doc-noteref"><sup>30</sup></a>, you can render a local <code>asciicast</code> file or a recording at a URL to an animated SVG using the following:</p>
<div class="no-row-height column-margin column-container"><div id="fn30"><p><sup>30</sup>&nbsp;Yes, this is in fact a Node.js application.</p></div></div><div class="sourceCode" id="cb6" data-code-line-numbers=""><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> svg-term <span class="ex">--cast</span> <span class="op">&lt;</span>filename/url<span class="op">&gt;</span> --out <span class="pp">[</span><span class="ss">filename</span><span class="pp">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="svg-term" class="level3">
<h3 class="anchored" data-anchor-id="svg-term"><code>&gt; svg-term</code></h3>
<p><code>svg-term-cli</code>, too, has optional arguments for customizing the rendered SVG’s appearance; some standout options that <em>aren’t</em> present in either of the previous tools include:</p>
<table class="table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Argument</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>--no-cursor [boolean]</code></td>
<td>Disabling cursor rendering</td>
</tr>
<tr class="even">
<td><code>--padding [number]</code></td>
<td>Setting distance between text and image bounds</td>
</tr>
<tr class="odd">
<td><code>--window [boolean]</code></td>
<td>Rendering with MacOS window decorations</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="where-svg-term-cli-falls-flat" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="where-svg-term-cli-falls-flat">Where <code>svg-term-cli</code> falls flat</h2>
<p>Unfortunately, it’s been 5 years and counting since the last commit<a href="#fn31" class="footnote-ref" id="fnref31" role="doc-noteref"><sup>31</sup></a> made to the <code>svg-term-cli</code> project, so while it still works at the time of writing, we’re probably not going to be able to expect any of the 25 open issues to be closed anytime soon (at least not until someone forks the repo and resuming maintainance for the project).</p>
<div class="no-row-height column-margin column-container"><div id="fn31"><p><sup>31</sup>&nbsp;And that wasn’t even anything meaningful to the codebase, just some edits to documentation, the last real commit actually modifying some code was <strong>7</strong> years ago in 2018.</p></div><div id="fn32"><p><sup>32</sup>&nbsp;Unlike <code>PowerSession-rs</code> however, <code>termsvg</code> does <strong>not</strong> support uploading recordings to <a href="https://asciinema.org">asciinema.org</a></p></div><div id="fn33"><p><sup>33</sup>&nbsp;Might be worth doing a comparison of SVG generations (wrt file size, speed, etc.) between <code>termsvg</code> and <code>svg-term-cli</code> for a future blog post.</p></div></div><p>If you’re looking for a more up-to-date alternative, then there’s the Go-based <a href="https://github.com/MrMarble/termsvg"><strong><code>termsvg</code></strong></a>, which is a functional but still early-stage CLI tool that’s able to record terminal sessions (just like <code>asciinema</code><a href="#fn32" class="footnote-ref" id="fnref32" role="doc-noteref"><sup>32</sup></a>) and export them to SVG<a href="#fn33" class="footnote-ref" id="fnref33" role="doc-noteref"><sup>33</sup></a>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/MrMarble/termsvg/master/examples/444816.svg" class="img-fluid figure-img"></p>
<figcaption>An animated SVG generated from an <code>asciinema</code> recording using <code>termsvg</code>. Looks just as good (if not better) than one generated by <code>svg-term-cli</code>.</figcaption>
</figure>
</div>
<hr>
<hr>
<hr>
</section>
</section>
<section id="what-to-explore-next" class="level1">
<h1>What to explore next</h1>
<p>While I’ve covered the most important tools in the terminal session recording realm in this post, there’s still a fair few number of programs out there that record and store recordings in lots of different ways.</p>
<p>The most notable feature that I’ve relegated to a future post is the concept of <strong><em>programmatic</em></strong> terminal session recording generation (that is, writing code to programmatically create recordings of terminal sessions) via tools like <a href="https://github.com/charmbracelet/vhs"><strong><code>vhs</code></strong></a> which have <em>oodles</em> of options for fine-tuning exactly how you want recordings to look.</p>
<p><strong>But that’s a software showcase for another day.</strong></p>


</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{hossain2024,
  author = {Hossain, Sadman},
  title = {**Software {Showcase} \#1: {Recording} Terminal Sessions
    Using `Asciinema` and Its Derivatives**},
  date = {2024-05-27},
  url = {https://sadman.ca/posts/2024-05-27-software-showcase-01-asciinema},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-hossain2024" class="csl-entry quarto-appendix-citeas" role="listitem">
Hossain, Sadman. 2024. <span>“**Software Showcase #1: Recording Terminal
Sessions Using `Asciinema` and Its Derivatives**.”</span> May 27, 2024.
<a href="https://sadman.ca/posts/2024-05-27-software-showcase-01-asciinema">https://sadman.ca/posts/2024-05-27-software-showcase-01-asciinema</a>.
</div></div></section></div></main> <!-- /main -->
<div class="giscus">
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/sadman\.ca");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Supported by <a href="https://posit.co"><img src="https://www.rstudio.com/assets/img/posit-logo-fullcolor-TM.svg" class="img-fluid" alt="Posit" width="65"></a></p>
</div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://sadman.ca">
<p>Blog</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../about.html">
<p>About</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://orcid.org/0000-0001-9691-420X">
<p>ORCID</p>
</a>
  </li>  
</ul>
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/sadmanca/blog/edit/main/posts/2024-05-27-software-showcase-01-asciinema/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/sadmanca/blog/issues/new/choose" class="toc-action"><i class="bi empty"></i>Report an issue</a></li><li><a href="https://github.com/sadmanca/blog/blob/main/posts/2024-05-27-software-showcase-01-asciinema/index.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/sadmanca">
      <i class="bi bi-twitter" role="img" aria-label="Twitter">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/sadmanca">
      <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/sadmanca">
      <i class="bi bi-linkedin" role="img" aria-label="GitHub">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://sadman.ca/index.xml">
      <i class="bi bi-rss" role="img" aria-label="Blog RSS">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</div><script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
<script src="../../site_libs/quarto-contrib/line-highlight-1.0.0/line-highlight.js" defer="true"></script>
</body></html>